name: Deploy react app
on: [push]

jobs:
  build:

    runs-on: self-hosted

    steps:
      - uses: actions/checkout@v4
        # Assuming that the ssh connection from the runner to the lxc is already established 
      - name: Connect to the lxc
        run: ssh -o StrictHostKeyChecking=no -p 22 ${{secrets.REMOTE_USERNAME}}@${{secrets.REMOTE_HOST}} 'cd && deploy.sh ${{secrets.REPO_NAME}} ${{secrets.USER_NAME}}'
      
      # - name: Clone/Pull the repo
      #   working-directory: ${{secrets.REPO_NAME}}  
      #   run: |
      #       cd ${{secrets.REPO_NAME}}
      #       git pull origin main
      - name: Test if works
        run: ip a
